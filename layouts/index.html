{{ define "main" }}

<section class="banner">
  <img src="{{ "img/Icon.png" | relURL }}" alt="Forge Icon" class="banner-logo">
  <div>
    <h1>Theorycrafting.life</h1>
    <p>Optimizing systems, stories, and self.</p>

    <div class="banner-links">
      <a href="{{ "/workshop/" | relURL }}">Workshop</a>
      <a href="{{ "/forge/" | relURL }}">Forge</a>
      <a href="{{ "/journal/" | relURL }}">Journal</a>
      <a href="{{ "/about/" | relURL }}">About</a>
    </div>
  </div>
</section>

<section class="hero">
  <p>
    Welcome — this is my forge for leadership, data, and creative problem-solving.
  </p>
</section>

<section class="card">
  <h2 style="margin:0 0 8px 0;">Latest Updates</h2>
  <ul class="post-list">
    {{ $sections := slice "workshop" "forge" "journal" }}
    {{ $pages := where .Site.RegularPages "Section" "in" $sections }}
    {{ range first 5 (sort $pages "Date" "desc") }}
      <li>
        <a href="{{ .RelPermalink }}"><strong>{{ .Title }}</strong></a>
        <span class="post-meta"> — {{ .Date.Format "Jan 2, 2006" }}</span>
        {{/* teaser: cut at first --- in body, else fallback */}}
        {{ $raw := .RawContent }}
        {{ $norm := replace $raw "\r\n" "\n" }}
        {{ $parts := split $norm "\n---\n" }}
        {{ if ge (len $parts) 2 }}
          <div>{{ (index $parts 0) | markdownify | plainify | truncate 140 }}</div>
        {{ else }}
          <div>{{ .Summary | plainify | truncate 140 }}</div>
        {{ end }}
      </li>
    {{ end }}
  </ul>
</section>

<section class="hero">
  <a href="{{ "/about/" | relURL }}" class="button button-about">
    Learn more About Me <span>→</span>
  </a>
</section>

{{ end }}
